"use strict";function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,n=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return n=e.done,e},e:function(e){i=!0,a=e},f:function(){try{n||null==r.return||r.return()}finally{if(i)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}$(function(){$('a[href^="#"]').click(function(e){var t;e.preventDefault(),e=$(this).attr("href"),$("html").animate({scrollTop:$(e).offset().top+5+"px"},500,t)});var c=$(".modal");$(".js-close-modal").click(function(){c.removeClass("visible"),$(document.body).removeClass("scroll-disabled")});var t=$(".js-parallax");$(document).on("scroll",function(e){var o=$(document).scrollTop();innerWidth<=768&&(o=0),t.each(function(e,t){var r=+$(t).attr("data-m")||2;$(t).css("transform","translateY(".concat(o/r,"px)"))})});function e(e){e.target,e.type,e.namespace;var t=e.item.count,r=e.item.index;0==(r=r-Math.round(t/2)+1)&&(r=t),e.page.count,e.page.index,e.page.size,o.text(r),i.text(t)}var a=$(".portfolio-slider"),n=$(".portfolio-filters"),r=$(".portfolio-controls"),o=$(".portfolio-controls__current"),i=$(".portfolio-controls__total");a.addClass("owl-carousel").owlCarousel({loop:!0,dots:!1,items:1,margin:2,autoHeight:!0,mouseDrag:!1,touchDrag:!1,onInitialized:e,responsive:{0:{mouseDrag:!0,touchDrag:!0},768:{mouseDrag:!1,touchDrag:!1}}}).on("changed.owl.carousel",e),r.find("button").click(function(e){$(this).hasClass("prev")?a.trigger("prev.owl.carousel"):a.trigger("next.owl.carousel")}),n.find("button").click(function(e){var t=$(this),r=t.html(),o=t.attr("data-category");t.parents("li").attr("hidden","").siblings().removeAttr("hidden"),n.find("b").html(r),n.attr("data-category",o),a.owlcarousel2_filter('[data-category*="'.concat(o,'"]')),a.find(".owl-stage-outer").css("height","initial")});r=$(".cooperation");r.addClass("js-enabled"),r.find(".cooperation-content").removeClass("expanded"),$(".js-expand-cooperation").click(function(e){var t=$(this),r="true"==t.attr("aria-pressed");t.attr("aria-pressed",!r),t.find("span").text(r?"Развернуть":"Свернуть"),t.toggleClass("expanded"),t.parents(".cooperation").find(".cooperation-content").toggleClass("expanded")});var u=$(".form"),d=u.find("ul");u.addClass("js-enabled"),$(".js-form-next").click(function(e){e.preventDefault(),d.trigger("next.owl.carousel")}),u.submit(function(e){e.preventDefault();function t(e,t){o=!1,$(e).parents("label").addClass("invalid").attr("data-error",t)}function r(e){$(e).parents("label").removeClass("invalid").attr("data-error","")}var o=!0,a=u.find('input[name="tel"]'),e=a.val().trim();""==e?t(a,"Пожалуйста, заполните это поле"):/^\s*(?:\+?(\d{1,3}))?([-. (]*(\d{3})[-. )]*)?((\d{3})[-. ]*(\d{2,4})(?:[-.x ]*(\d+))?)\s*$/.test(e)?r(a):t(a,"Неверный формат телефона");e=u.find('input[name="email"]'),a=e.val().trim();""==a?t(e,"Пожалуйста, заполните это поле"):/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())?r(e):t(e,"Неверный формат email!");e=u.find('input[name="name"]');if(""==e.val().trim()?t(e,"Пожалуйста, заполните это поле"):r(e),o){var n={},i=_createForOfIteratorHelper(decodeURIComponent(u.serialize()).split("&").map(function(e){return{key:(e=e.split("="))[0],val:e[1]}}));try{for(i.s();!(l=i.n()).done;){var l,s=l.value;null!=n[s.key]?"array"==Object.prototype.toString.call(n[s.key]).toLowerCase().slice(8,-1)?n[s.key].push(s.val):n[s.key]=[n[s.key],s.val]:(l=s.val,console.log(s.key),"budget"==s.key&&(l="₽"+l),n[s.key]=l)}}catch(e){i.e(e)}finally{i.f()}console.log(n),$.ajax({type:"GET",url:"google-sheets.php",data:n,success:function(){},error:function(e){console.error(e)}}),$.ajax({type:"GET",url:"mail.php",data:n,success:function(){},error:function(e){console.error(e)}}),c.addClass("visible"),$(document.body).addClass("scroll-disabled")}else innerWidth<=768&&d.trigger("to.owl.carousel",[1,500,!0])});r=function(){innerWidth<=768?d.addClass("owl-carousel").owlCarousel({loop:!1,dots:!1,items:1,margin:2,autoHeight:!0,mouseDrag:!1,touchDrag:!1}):d.trigger("destroy.owl.carousel")};r(),window.addEventListener("resize",r)});